import{d as v,r as C,K as k,h as p,o as m,c as h,a as i,i as d,w as r,O as D,l as f,_ as V,D as I,I as E,t as w,k as R,F as U,E as y,q as T,s as $,f as q,n as B,P as N,R as H}from"./index-9003163f.js";import{c as L,a as M}from"./index.esm-02db0d52.js";import{q as O}from"./article-9956cc38.js";const P={class:"big-screen-title"},z={class:"title-input"},K={class:"button-box"},W=f("预览"),j=v({__name:"ArticleTitle",emits:["releaseClick"],setup(o,{emit:e}){const n=C({titleValue:""}),u=k(()=>{let t=!1;return n.titleValue||(t=!0),t}),c=()=>{e("releaseClick",n.titleValue)};return(t,a)=>{const l=p("el-input"),s=p("el-button");return m(),h("div",P,[i("div",z,[d(l,{placeholder:"请输入文章标题",class:"article-title",modelValue:n.titleValue,"onUpdate:modelValue":a[0]||(a[0]=_=>n.titleValue=_)},null,8,["modelValue"])]),i("div",K,[d(s,{type:"primary",disabled:D(u),onClick:c},{default:r(()=>[W]),_:1},8,["disabled"])])])}}});const G=V(j,[["__scopeId","data-v-8678a237"]]),J=o=>(T("data-v-d200f5df"),o=o(),$(),o),Q={class:"article-title"},X={class:"release-container-box"},Y=["innerHTML"],Z={class:"article-category-box"},ee=J(()=>i("p",{class:"article-category-title"},"文章分类",-1)),te={class:"article-category"},oe={class:"dialog-footer"},ae=f("取 消"),le=f("发 布"),se={name:"ReleaseContainer"},ie=v({...se,props:{visible:{type:Boolean},title:null,articleContainer:null,categoryData:null},emits:["update:visible"],setup(o,{emit:e}){const n=o,u=()=>e("update:visible",!1),c=C({categoryValue:"",visibleFlag:!1}),t=k(()=>{let s=!1;return c.categoryValue||(s=!0),s}),a=s=>{const _=n.categoryData.find(b=>b.id===s);console.log(_,"getFind")},l=()=>{y.success("只做测试哟~~~~~"),u()};return I(()=>n.visible,()=>{c.visibleFlag=n.visible}),(s,_)=>{const b=p("el-radio"),A=p("el-radio-group"),x=p("el-button"),F=p("el-dialog");return m(),E(F,{title:"文章预览",modelValue:c.visibleFlag,"onUpdate:modelValue":_[1]||(_[1]=g=>c.visibleFlag=g),width:"80%","close-on-click-modal":!1,"custom-class":"article-dialog-box",onClose:u,draggable:""},{footer:r(()=>[i("span",oe,[d(x,{onClick:u},{default:r(()=>[ae]),_:1}),d(x,{type:"primary",disabled:D(t),onClick:l},{default:r(()=>[le]),_:1},8,["disabled"])])]),default:r(()=>[i("div",Q,w(o.title),1),i("div",X,[i("div",{class:"release-container",innerHTML:o.articleContainer},null,8,Y)]),i("div",Z,[ee,i("div",te,[d(A,{modelValue:c.categoryValue,"onUpdate:modelValue":_[0]||(_[0]=g=>c.categoryValue=g),onChange:a},{default:r(()=>[(m(!0),h(U,null,R(o.categoryData,g=>(m(),E(b,{label:g.id,key:g.id,class:"category-item"},{default:r(()=>[f(w(g.category_name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue"])}}});const ne=V(ie,[["__scopeId","data-v-d200f5df"]]),S=o=>(T("data-v-209bf239"),o=o(),$(),o),ce={class:"article-created-box"},re=S(()=>i("div",{id:"toolbar-container"},null,-1)),de=S(()=>i("div",{id:"editor-container"},null,-1)),_e={name:H.ARTICLE_CREATE},ue=v({..._e,setup(o){const e=C({wangEditor:null,articleTitle:"",articleContainer:"",dialogVisible:!1,categoryData:[]});q(()=>{n(),u()});const n=async()=>{const t=await O({level:2});t.code===B.SUCCESS?e.categoryData=t.data:y.error(t.msg)},u=()=>{const t=document.querySelector(".article-created-box").scrollHeight,a=document.querySelector("#editor-container");a.style.height=`${t-200}px`;const l={scroll:!1,MENU_CONF:{uploadImage:{base64LimitSize:5e3*1024}}};l.placeholder="请输入内容";const s=L({selector:"#editor-container",config:l,mode:"default"});M({editor:s,selector:"#toolbar-container",mode:"default"}),e.wangEditor=s},c=t=>{var a,l;if(e.articleTitle=t,e.wangEditor){if(!((a=e.wangEditor)!=null&&a.getText()))return y.warning("输入内容");e.articleContainer=(l=e.wangEditor)==null?void 0:l.getHtml(),e.dialogVisible=!0}};return N(()=>{var t;(t=e.wangEditor)==null||t.destroy(),e.wangEditor=null}),(t,a)=>{const l=p("el-col");return m(),h("div",ce,[d(l,{xs:24,sm:24},{default:r(()=>[d(G,{onReleaseClick:c})]),_:1}),d(l,{xs:24,sm:24,class:"editor-box"},{default:r(()=>[re,de]),_:1}),d(ne,{title:e.articleTitle,articleContainer:e.articleContainer,categoryData:e.categoryData,visible:e.dialogVisible,"onUpdate:visible":a[0]||(a[0]=s=>e.dialogVisible=s)},null,8,["title","articleContainer","categoryData","visible"])])}}});const fe=V(ue,[["__scopeId","data-v-209bf239"]]);export{fe as default};
