import{d as B,u as S,a as h,r as f,b as g,c as d,o as x,e as D,f as N,g as t,w as u,h as E,i as w,j as R,R as V,k as I,l as A,E as v,U as C,m as T,p as U,n as k,_ as L}from"./index.9362ddba.js";const O=l=>(U("data-v-2bf2fc29"),l=l(),k(),l),P={class:"login-box"},j={class:"login-content"},H=O(()=>N("p",{class:"login-title"},"\u6B22\u8FCE\u767B\u5F55",-1)),q=R("\u767B\u5F55"),K={name:V.LOGIN},M=B({...K,setup(l){const p=S(),b=h(),o=f({userName:"liuzhao",password:"123456"}),y=f({userName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]}),r=g(!1),i=g(),m=async c=>{!c||await c.validate(async e=>{if(e){r.value=!0;const n={userName:o.userName,password:o.password};try{const s=await I(n);if(console.log(s,"data"),s.code===A.SUCCESS){v({message:"\u767B\u5F55\u6210\u529F",type:"success"});try{await p.dispatch(C.ACT_FETCH_USERINFO,s.data),await p.dispatch(C.ACT_FETCH_FIND_BY_USERID,!0),b.push({path:T.DASHBOARD})}catch(_){console.log(_,111)}}else v({message:s.msg,type:"error"});r.value=!1}catch{r.value=!1}}else return!1})};return(c,e)=>{const n=d("el-input"),s=d("el-form-item"),_=d("el-button"),F=d("el-form");return x(),D("div",P,[N("div",j,[H,t(F,{"label-position":"left",model:o,ref_key:"formRef",ref:i,rules:y},{default:u(()=>[t(s,{label:"\u7528\u6237\u540D",prop:"userName","label-width":"80px"},{default:u(()=>[t(n,{modelValue:o.userName,"onUpdate:modelValue":e[0]||(e[0]=a=>o.userName=a)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5BC6\u7801",prop:"password","label-width":"80px"},{default:u(()=>[t(n,{type:"password",modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),onKeydown:e[2]||(e[2]=E(a=>m(i.value),["enter"]))},null,8,["modelValue"])]),_:1}),t(s,null,{default:u(()=>[t(_,{class:"loginBtn",type:"primary",onClick:e[3]||(e[3]=a=>m(i.value)),loading:r.value},{default:u(()=>[q]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),w(" <DDScanLogin/> "),w(" <DDAccountLogin /> ")])])}}});const $=L(M,[["__scopeId","data-v-2bf2fc29"],["__file","D:/My-Project/Vue-Project-Admin/src/views/login/index.vue"]]);export{$ as default};
